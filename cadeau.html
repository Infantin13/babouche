<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Carte cadeau Zara üéÅ</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  width:100vw;height:100vh;
  background:#000;
  font-family:system-ui,sans-serif;
  overflow:hidden;
}

/* Transition depuis le GIF */
#loader-fade {
  position:fixed;
  inset:0;
  background:#000;
  animation:fadeOut 1.2s ease forwards;
  z-index:999;
  pointer-events:none;
}
@keyframes fadeOut {
  0% {opacity:1;}
  100% {opacity:0;}
}

/* CARTE FULLSCREEN */
.card{
  width:100vw;
  height:100vh;
  padding:2vh 4vw;       /* padding r√©duit */
  box-sizing:border-box; /* garantit que rien ne d√©passe */
  overflow:hidden;       /* emp√™che tout scroll furtif */
  background:radial-gradient(circle at top left,#333 0%,#050505 35%,#000 80%);
  color:#fff;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  position:relative;
  animation:float 4s ease-in-out infinite;
  overflow:hidden;
}

/* Halo + ligne brillante */
.card::before{
  content:"";
  position:absolute;
  width:70vw;height:70vw;
  border-radius:50%;
  background:rgba(255,255,255,0.08);
  top:-25vw;right:-25vw;
  filter:blur(10vw);
  animation:shine 8s infinite linear;
}
.card::after{
  content:"";
  position:absolute;
  width:200%;height:2px;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.7),transparent);
  top:50%;left:-60%;
  animation:sweep 6s infinite linear;
}

/* Logo ZARA */
.brand{
  font-size:8vw;
  letter-spacing:1.2vw;
  text-transform:uppercase;
  font-weight:300;
  text-align:center;
  margin-top:3vh;
  z-index:10;
}

/* JOYEUX NO√ãL ‚Äì CENTR√â AU-DESSUS DU MONTANT */
#noel-message{
  text-align:center;
  font-size:7vw;
  font-weight:700;
  margin-top:1.5vh;
  margin-bottom:1vh;
  text-shadow:0 0 18px rgba(255,255,255,0.9);
  opacity:0;
  transform:translateY(10px);
  transition:opacity 0.9s ease, transform 0.9s ease;
  z-index:10;
  pointer-events:none;
}

/* Bloc montant centr√© */
.amount-center{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
  z-index:10;
}
.amount-wrapper{
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
  height:14vh;
  min-width:40vw;
}

/* Montant dor√© */
.amount-real{
  font-size:12vw;
  font-weight:700;
  padding:10px 22px;
  border-radius:12px;
  background:linear-gradient(135deg,#ffd678,#e8b144,#ffcf5e);
  color:#000;
  text-shadow:0 2px 6px rgba(0,0,0,0.25);
  position:relative;
  z-index:3;
  opacity:0;          /* r√©v√©l√© apr√®s grattage */
  transform:scale(0.6);
}

/* Texte "Gratte ici" */
#scratch-text{
  position:absolute;
  z-index:7;
  color:#fff;
  font-size:5vw;
  font-weight:600;
  text-shadow:0 0 12px rgba(255,255,255,0.9);
  opacity:0.85;
  pointer-events:none;
  user-select:none;
}

/* BLING montant */
@keyframes bling {
  0% {transform:scale(0.6); filter:brightness(0.5);}
  40% {transform:scale(1.25); filter:brightness(1.6);}
  100% {transform:scale(1);}
}

/* √âtincelles */
.sparkle {
  position:absolute;
  width:20px;height:20px;
  background:radial-gradient(circle,#fff 0%,#ffd36b 40%,transparent 70%);
  border-radius:50%;
  opacity:0;
  animation:orbit 3s linear infinite, sparkleFade 3s ease-in-out infinite;
  pointer-events:none;
}
.sparkle:nth-child(1){animation-delay:0s;}
.sparkle:nth-child(2){animation-delay:.7s;}
.sparkle:nth-child(3){animation-delay:1.3s;}
.sparkle:nth-child(4){animation-delay:2s;}

@keyframes sparkleFade {
  0%,100% {opacity:0;}
  50% {opacity:1;}
}
@keyframes orbit {
  0% {transform:rotate(0deg) translateX(40px) rotate(0deg);}
  100% {transform:rotate(360deg) translateX(40px) rotate(-360deg);}
}

/* Canvas grattable */
#scratchCanvas{
  position:absolute;
  top:0;left:0;
  width:100%;height:100%;
  border-radius:12px;
  z-index:6;
}

/* Infos en bas */
.bottom-info{text-align:center;margin-bottom:3vh;}
.number{
  font-size:5vw;letter-spacing:1vw;margin-bottom:2vh;
}
.bottom-line{
  display:flex;justify-content:center;gap:12vw;
  font-size:4vw;
}
.label{
  font-size:3vw;text-transform:uppercase;opacity:.6;
}
.value{
  font-size:4.5vw;margin-top:1vw;
}

/* Animations globales */
@keyframes float{
  0%{transform:scale(1) translateY(0);}
  50%{transform:scale(1.02) translateY(-1vh);}
  100%{transform:scale(1) translateY(0);}
}
@keyframes shine{
  0%{transform:translate(0,0);opacity:0.08;}
  50%{transform:translate(-4vw,3vw);opacity:0.15;}
  100%{transform:translate(0,0);opacity:0.08;}
}
@keyframes sweep{
  0%{transform:translateX(-80%);opacity:0;}
  40%{opacity:.7;}
  100%{transform:translateX(80%);opacity:0;}
}
</style>
</head>

<body>

<div id="loader-fade"></div>

<div class="card">

  <div class="brand">ZARA</div>

  <!-- Joyeux No√´l propre, centr√© -->
  <div id="noel-message">üéÑ Joyeux No√´l üéÅ <br> ‚ù§Ô∏è Mon Coeur ‚ù§Ô∏è</div>

  <div class="amount-center">
    <div class="amount-wrapper" id="scratchZone">
      <div class="amount-real" id="amountReal">100‚Ç¨</div>

      <!-- √âtincelles autour du montant -->
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      <div class="sparkle"></div>

      <!-- Texte dans la zone √† gratter -->
      <div id="scratch-text">Gratte ici</div>

      <canvas id="scratchCanvas"></canvas>
    </div>
  </div>

  <div class="bottom-info">
    <div class="number">xxxxxxxxxxxxxxx</div>

    <div class="bottom-line">
      <div>
        <div class="label">CVV</div>
        <div class="value">yyy</div>
      </div>

      <div>
        <div class="label">Exp.</div>
        <div class="value">03/12/2028</div>
      </div>
    </div>
  </div>

</div>

<script>
/* --- EFFET GRATTER --- */
const canvas = document.getElementById("scratchCanvas");
const zone = document.getElementById("scratchZone");
const ctx = canvas.getContext("2d");
const scratchText = document.getElementById("scratch-text");

function resizeCanvas() {
  canvas.width = zone.offsetWidth;
  canvas.height = zone.offsetHeight;
  ctx.fillStyle = "#bdbdbd";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

let scratching = false;
canvas.addEventListener("mousedown", () => scratching = true);
canvas.addEventListener("mouseup", () => scratching = false);
canvas.addEventListener("mouseleave", () => scratching = false);
canvas.addEventListener("touchstart", () => scratching = true);
canvas.addEventListener("touchend", () => scratching = false);

function scratch(e) {
  if (!scratching) return;

  // On cache "Gratte ici" d√®s le premier grattage
  if (scratchText.style.opacity !== "0") {
    scratchText.style.opacity = "0";
  }

  let rect = canvas.getBoundingClientRect();
  let x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
  let y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;

  ctx.globalCompositeOperation = "destination-out";
  ctx.beginPath();
  ctx.arc(x, y, 30, 0, Math.PI * 2);
  ctx.fill();
}

canvas.addEventListener("mousemove", scratch);
canvas.addEventListener("touchmove", scratch);

/* Auto-d√©voilement */
function checkReveal() {
  let pixels = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
  let cleared = 0;
  for (let i = 3; i < pixels.length; i += 4) {
    if (pixels[i] === 0) cleared++;
  }
  let ratio = cleared / (pixels.length / 4);

  if (ratio > 0.6) {
    revealAmount();
    return;
  }
  requestAnimationFrame(checkReveal);
}
checkReveal();

/* BLING montant + Joyeux No√´l align√© */
function revealAmount() {
  const amount = document.getElementById("amountReal");
  const noel   = document.getElementById("noel-message");

  canvas.style.opacity = "0";
  setTimeout(() => canvas.remove(), 350);

  amount.style.opacity = "1";
  amount.style.animation = "bling 0.9s ease forwards";

  const sparkles = document.querySelectorAll(".sparkle");
  sparkles.forEach(s => s.style.opacity = "1");

  setTimeout(() => {
    noel.style.opacity = "1";
    noel.style.transform = "translateY(0)";
  }, 900);
}
</script>

</body>
</html>
